"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[638],{5593:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7483),a=n(8563),s=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};const i=n(52),l=[],r={getValues(){return s(this,void 0,void 0,(function*(){let e={};try{const t="settings.json",n=yield(0,o.YW)(t);return e=n.values,e}catch(t){const e=(0,o.GD)(t);console.log(e)}return e}))},getDescriptions(){return s(this,void 0,void 0,(function*(){let e=[];try{const t="settings.json",n=yield(0,o.YW)(t);return e=n.descriptions,e}catch(t){const e=(0,o.GD)(t);console.log(e)}return e}))},commitSettings(e){return i.post("/settings.json",JSON.stringify(e)).then((()=>(a.Z.info(a.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((e=>(a.Z.error(a.Z.types.DOMAIN,`Failed to commit settings to Domain: ${e}`),!1)))},automaticCommitSettings(e){l.forEach(((e,t)=>{clearTimeout(e),l.splice(t,1)})),l.push(window.setTimeout(this.commitSettings,5e3,e))},createNewDomainID(e){return s(this,void 0,void 0,(function*(){try{const t=`label=${e}`,n=yield i.post("/api/domains",t);if("failure"===n.data.status)return"";const o=n.data.domain.domainId;return o}catch(t){return console.log(t),""}}))},getDomains(){return s(this,void 0,void 0,(function*(){let e=[];try{const t="api/domains",n=yield(0,o.YW)(t);return e=n.data.domains,e}catch(t){console.log(t)}return e}))}}},7483:(e,t,n)=>{n.d(t,{ge:()=>u,YW:()=>c,GD:()=>l});var o=n(52),a=n.n(o);const s="http://localhost:40100/";var i=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};function l(e){if("string"===typeof e)return e;const t=e;return"message"in t?t.message:`Error: ${JSON.stringify(e)}`}function r(e,t){return(null!==t&&void 0!==t?t:s)+e}function c(e,t){var n;return i(this,void 0,void 0,(function*(){const o=r(e,t);let s="";try{const t=yield a().get(o);if(t&&t.status){if(200===t.status)return t.data;s=`${null!==(n=t.statusText)&&void 0!==n?n:"unspecified"}`}else s=`Poorly formed response to GET ${e}: ${JSON.stringify(t)}`}catch(i){const t=l(i);s=`Exception on GET ${e}: ${t}`,console.log(s)}throw new Error(s)}))}function u(e,t){var n;return i(this,void 0,void 0,(function*(){const o=r(e,t);let s="";try{const t=yield a()["delete"](o);if(t&&t.status){if(200===t.status)return;s=`${null!==(n=t.statusText)&&void 0!==n?n:"unspecified"}`}else s=`Poorly formed response to DELETE ${e}: ${JSON.stringify(t)}`}catch(i){const t=l(i);s=`Exception on DELETE ${e}: ${t}`,console.log(s)}throw new Error(s)}))}},7526:(e,t,n)=>{n.d(t,{Z:()=>x});var o=n(3673);const a=(0,o._)("p",{class:"q-mt-md text-h5"},"Server Restarting...",-1);function s(e,t,n,s,i,l){const r=(0,o.up)("q-spinner"),c=(0,o.up)("q-linear-progress"),u=(0,o.up)("q-card-actions"),d=(0,o.up)("q-card"),m=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(m,{modelValue:e.restartPopup,"onUpdate:modelValue":t[0]||(t[0]=t=>e.restartPopup=t),persistent:"","transition-duration":"200","transition-hide":"fade"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{flat:"",class:"transparent q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{align:"center",vertical:"",class:"row items-center no-wrap"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{color:"accent",size:"4rem",thickness:"8"}),a,(0,o.Wm)(c,{value:e.restartProgress,"animation-speed":"500",color:"accent"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var i=n(7483),l=n(8563),r=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};const c=n(52),u=(0,o.aZ)({name:"SharedMethods",props:{restartServerWatcher:Boolean},data(){return{restartPopup:!1,restartProgress:0}},watch:{restartServerWatcher(){this.restartServer()}},methods:{restartServer(){return r(this,void 0,void 0,(function*(){const e=new Promise((function(e){const t="restart";(0,i.YW)(t),setTimeout((function(){e("Domain Server Restarted")}),3e3)})),t=setInterval((()=>{this.restartProgress+=.05}),3e3/23.5);this.restartPopup=!0,yield e,clearInterval(t),this.restartProgress=0,this.restartPopup=!1}))},commitSettings(e){return c.post("/settings.json",JSON.stringify(e)).then((()=>(l.Z.info(l.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((e=>(l.Z.error(l.Z.types.DOMAIN,`Failed to commit settings to Domain: ${e}`),!1)))}}});var d=n(4260),m=n(6778),h=n(151),p=n(9367),v=n(9754),w=n(1598),g=n(7518),f=n.n(g);const b=(0,d.Z)(u,[["render",s]]),x=b;f()(u,"components",{QDialog:m.Z,QCard:h.Z,QCardActions:p.Z,QSpinner:v.Z,QLinearProgress:w.Z})},6638:(e,t,n)=>{n.r(t),n.d(t,{default:()=>we});var o=n(3673);const a={class:"q-pa-md"};function s(e,t,n,s,i,l){const r=(0,o.up)("MetaverseSettings"),c=(0,o.up)("WebRTCSettings"),u=(0,o.up)("WordpressSettings");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r),(0,o.Wm)(c),(0,o.Wm)(u)])}const i=(0,o._)("div",{class:"text-h5 text-center text-weight-bold"},"Your Metaverse Account",-1),l={key:0,class:"text-overline text-positive text-center"},r={key:1,class:"text-overline text-negative text-center"},c=(0,o._)("span",{class:"text-h5 q-mb-sm text-bold text-white"},"Connect Account",-1),u=(0,o._)("span",{class:"text-body2"},[(0,o.Uk)("If you did not successfully create an access token click "),(0,o._)("b",null,"CANCEL"),(0,o.Uk)(" below and attempt to connect your account again.")],-1),d=(0,o._)("span",{class:"text-h5 q-mb-sm text-bold text-warning"},"Are you sure?",-1),m=(0,o._)("span",{class:"text-body2"},[(0,o.Uk)("This will remove your domain-server OAuth access token."),(0,o._)("br"),(0,o.Uk)(" This could cause your domain to appear offline and no longer be reachable via any place names.")],-1),h=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This defines how other nodes in the Metaverse will be able to reach your domain-server. If you don't want to deal with any network settings, use full automatic networking.",-1),p=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},[(0,o.Uk)("This is your OAuth access token to connect this domain-server with your Metaverse account. It can be generated by clicking the 'Connect Account' button above."),(0,o._)("br"),(0,o.Uk)(" You can also go to the Security page of your account on your Metaverse Server and generate a token with the 'domains' scope and paste it here.")],-1),v={class:"row"},w=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This is your Metaverse domain ID. If you do not want your domain to be registered in the Metaverse you can leave this blank.",-1),g=(0,o._)("span",{class:"text-h5 q-mb-sm text-bold text-white"},"Create new domain ID",-1),f=(0,o._)("span",{class:"text-body2"},"Enter a unique name for this machine. This will help you identify which domain ID belongs to which machine.",-1),b=(0,o._)("span",{class:"text-h5 q-mb-sm text-bold text-white"},"Choose from your domains",-1),x=(0,o._)("span",{class:"text-body2"},"Choose the Metaverse domain you want this domain-server to represent. This will set your domain ID on the settings page.",-1),y=(0,o._)("p",{class:"text-warning text-subtitle1 text-weight-bold"},"You do not have any domains in your Metaverse account. Click `NEW DOMAIN ID` to make one.",-1),_=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},[(0,o.Uk)("This is the local port your domain-server binds to for UDP connections. Depending on your router, this may need to be changed to unique values for each domain-server in order to run multiple full automatic networking domain-servers in the same network."),(0,o._)("br"),(0,o.Uk)(" You can use the value 0 to have the domain-server select a random port, which will help in preventing port collisions.")],-1),W=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Enable secure checksums on communication that uses the Metaverse protocol. Increases security with possibly a small performance penalty",-1),k=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Allows your domain's metadata to be accessible on the public internet via direct HTTP connection to the domain server",-1),D=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This is the port where the Metaverse exporter accepts connections. It listens both on IPv4 and IPv6 and can be accessed remotely, so you should make sure to restrict access with a firewall as needed.",-1);function C(e,t,n,a,s,C){const S=(0,o.up)("SharedMethods"),q=(0,o.up)("q-btn"),V=(0,o.up)("q-card-section"),T=(0,o.up)("q-input"),P=(0,o.up)("q-card-actions"),I=(0,o.up)("q-form"),Z=(0,o.up)("q-card"),U=(0,o.up)("q-dialog"),A=(0,o.up)("q-icon"),E=(0,o.up)("q-separator"),O=(0,o.up)("q-select"),L=(0,o.up)("q-inner-loading"),M=(0,o.up)("q-toggle"),N=(0,o.up)("q-expansion-item"),R=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(S,{"restart-server-watcher":e.restartServer},null,8,["restart-server-watcher"]),(0,o._)("div",null,[(0,o.Wm)(Z,{class:"my-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[i,e.isUserConnected?((0,o.wg)(),(0,o.iD)("div",l,"Metaverse Account Connected")):((0,o.wg)(),(0,o.iD)("div",r,"Account Not Connected")),(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[e.isUserConnected?((0,o.wg)(),(0,o.j4)(q,{key:1,onClick:t[1]||(t[1]=t=>e.showConfirmDisconnect=!0),class:"q-mb-sm",padding:"0.5em 1.5em",push:"",color:"negative",label:"Disconnect Account"})):((0,o.wg)(),(0,o.j4)(q,{key:0,onClick:t[0]||(t[0]=t=>e.showConfirmConnect=!0),href:"https://metaverse.vircadia.com/live//user/tokens/new?for_domain_server=true",target:"_blank",class:"q-mb-sm",padding:"0.5em 2em",push:"",color:"positive",label:"Connect Metaverse Account"})),(0,o.Wm)(U,{modelValue:e.showConfirmConnect,"onUpdate:modelValue":t[3]||(t[3]=t=>e.showConfirmConnect=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"bg-primary q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"row items-center"},{default:(0,o.w5)((()=>[c,u])),_:1}),(0,o.Wm)(I,{onSubmit:e.onConnectAccount},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{mask:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",rules:[e=>/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g.test(e)||"Invalid Token"],"bg-color":"white","label-color":"primary",standout:"bg-white text-primary",class:"text-subtitle1",modelValue:e.accessToken,"onUpdate:modelValue":t[2]||(t[2]=t=>e.accessToken=t),label:"Enter Access Token"},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{onClick:e.onDisconnectAccount,flat:"",label:"Cancel",color:"white"},null,8,["onClick"]),[[R]]),(0,o.Wm)(q,{flat:"",label:"Confirm",type:"submit",color:"white"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(U,{modelValue:e.showConfirmDisconnect,"onUpdate:modelValue":t[4]||(t[4]=t=>e.showConfirmDisconnect=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"bg-primary q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"q-mb-sm q-mr-sm",name:"warning",color:"warning",size:"1.5rem"}),d,m])),_:1}),(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{flat:"",label:"Cancel",color:"white"},null,512),[[R]]),(0,o.wy)((0,o.Wm)(q,{onClick:e.onDisconnectAccount,flat:"",label:"Confirm",color:"white"},null,8,["onClick"]),[[R]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(E),(0,o.Wm)(N,{modelValue:e.isMetaverseSettingsToggled,"onUpdate:modelValue":t[20]||(t[20]=t=>e.isMetaverseSettingsToggled=t),class:"q-mt-md text-subtitle1",popup:"",icon:"settings",label:"Advanced Settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[e.showAutomaticNetworking?((0,o.wg)(),(0,o.j4)(V,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{standout:"bg-primary text-white",color:"primary","emit-value":"","map-options":"",modelValue:e.automaticNetworking,"onUpdate:modelValue":t[5]||(t[5]=t=>e.automaticNetworking=t),options:e.networkingOptions,label:"Automatic Networking","transition-show":"jump-up","transition-hide":"jump-down"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"public"})])),_:1},8,["modelValue","options"]),h])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{mask:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",rules:[e=>/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}/g.test(e)||"Incorrect Token! Generate one by clicking `Connect Account` above"],standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.accessToken,"onUpdate:modelValue":t[6]||(t[6]=t=>e.accessToken=t),label:"Access Token"},null,8,["rules","modelValue"]),p])),_:1}),(0,o._)("div",v,[e.isUserConnected?((0,o.wg)(),(0,o.j4)(V,{key:0,class:"col-12 col-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.domainID,"onUpdate:modelValue":t[7]||(t[7]=t=>e.domainID=t),label:"Domain ID"},null,8,["modelValue"]),(0,o.Wm)(q,{onClick:t[8]||(t[8]=t=>e.showCreateNewDomainID=!0),class:"q-mt-xs",color:"primary",label:"new domain ID"}),(0,o.Wm)(q,{onClick:e.onChooseFromDomains,class:"q-mt-xs q-ml-xs",color:"primary",label:"choose from my domains"},null,8,["onClick"]),w])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(U,{modelValue:e.showCreateNewDomainID,"onUpdate:modelValue":t[11]||(t[11]=t=>e.showCreateNewDomainID=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"bg-primary q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"row items-center"},{default:(0,o.w5)((()=>[g,f])),_:1}),(0,o.Wm)(I,{onSubmit:e.onNewDomainID},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{rules:[e=>!!e||"A name is required"],"bg-color":"white","label-color":"primary",standout:"bg-white text-primary",class:"text-subtitle1",modelValue:e.newDomainLabel,"onUpdate:modelValue":t[9]||(t[9]=t=>e.newDomainLabel=t),label:"Enter Name/Label"},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{onClick:t[10]||(t[10]=t=>e.newDomainLabel=""),flat:"",label:"Cancel",color:"white"},null,512),[[R]]),(0,o.Wm)(q,{flat:"",label:"Create",type:"submit",color:"white"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(U,{modelValue:e.showChooseDomains,"onUpdate:modelValue":t[15]||(t[15]=t=>e.showChooseDomains=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"bg-primary q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"row items-center"},{default:(0,o.w5)((()=>[b,x])),_:1}),e.showDomainOptions?((0,o.wg)(),(0,o.j4)(I,{key:0,onSubmit:e.onChooseDomain},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(O,{standout:"bg-primary text-white",color:"primary","emit-value":"","map-options":"",modelValue:e.currentDomainOption,"onUpdate:modelValue":t[12]||(t[12]=t=>e.currentDomainOption=t),options:e.domainsOptions,label:"Choose Domain","transition-show":"jump-up","transition-hide":"jump-down"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"domain"})])),_:1},8,["modelValue","options"])])),_:1}),(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{onClick:t[13]||(t[13]=t=>e.newDomainLabel=""),flat:"",label:"Cancel",color:"white"},null,512),[[R]]),(0,o.Wm)(q,{flat:"",label:"Choose Domain",type:"submit",color:"white"})])),_:1})])),_:1},8,["onSubmit"])):(0,o.kq)("",!0),e.showDomainOptions?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(V,{key:1},{default:(0,o.w5)((()=>[y,(0,o.Wm)(P,{align:"center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{onClick:t[14]||(t[14]=t=>{e.newDomainLabel="",e.showDomainOptions=!0,e.showChooseDomains=!1}),flat:"",label:"Cancel",color:"warning"},null,512),[[R]])])),_:1})])),_:1})),(0,o.Wm)(L,{showing:e.chooseDomainLoading,label:"Please wait..."},null,8,["showing"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(V,{class:"col-12 col-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.localUDPPort,"onUpdate:modelValue":t[16]||(t[16]=t=>e.localUDPPort=t),label:"Local UDP Port"},null,8,["modelValue"]),_])),_:1})]),(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{modelValue:e.isPacketVerificationEnabled,"onUpdate:modelValue":t[17]||(t[17]=t=>e.isPacketVerificationEnabled=t),"checked-icon":"check",color:"positive",label:"Enable Packet Verification","unchecked-icon":"clear"},null,8,["modelValue"]),W])),_:1}),(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{modelValue:e.isHTTPMetadataEnabled,"onUpdate:modelValue":t[18]||(t[18]=t=>e.isHTTPMetadataEnabled=t),"checked-icon":"check",color:"positive",label:"Enable Metadata HTTP Availability","unchecked-icon":"clear"},null,8,["modelValue"]),k])),_:1}),(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.metadataExporterPort,"onUpdate:modelValue":t[19]||(t[19]=t=>e.metadataExporterPort=t),label:"Metadata Exporter HTTP Port"},null,8,["modelValue"]),D])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])],64)}var S=n(5593),q=n(7526),V=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};const T=(0,o.aZ)({name:"MetaverseSettings",components:{SharedMethods:q.Z},data(){return{values:{},networkingOptions:[{label:"Full: update both the IP address and port to reach my server",value:"full"},{label:"IP Only: update just my IP address, I will open the port manually",value:"ip"},{label:"None: use the network information I have entered for this domain in the Metaverse Server",value:"disabled"}],isMetaverseSettingsToggled:!1,showConfirmConnect:!1,showConfirmDisconnect:!1,showCreateNewDomainID:!1,showChooseDomains:!1,showDomainOptions:!0,chooseDomainLoading:!1,domainsOptions:[],currentDomainOption:"",isUserConnected:!1,newDomainLabel:"",restartServer:!1}},methods:{onConnectAccount(){this.isUserConnected=!0,this.showConfirmConnect=!1},onDisconnectAccount(){if(""!==this.accessToken||""!==this.domainID){const e={metaverse:{access_token:"",id:""}};S.Z.commitSettings(e),this.refreshSettingsValues()}},onNewDomainID(){return V(this,void 0,void 0,(function*(){this.showCreateNewDomainID=!1;const e=yield S.Z.createNewDomainID(this.newDomainLabel);this.newDomainLabel="",e?(this.$q.notify({message:"Success!",caption:"click `Restart Server` to apply changes",color:"positive",position:"top"}),this.domainID=e):this.$q.notify({message:"There was a problem creating your new domain ID",caption:"please try again",color:"negative",position:"center"})}))},onChooseFromDomains(){return V(this,void 0,void 0,(function*(){this.showChooseDomains=!0,this.chooseDomainLoading=!0;const e=yield S.Z.getDomains();this.chooseDomainLoading=!1,this.domainsOptions=[],e.length>0?(this.currentDomainOption=this.domainID,e.forEach((e=>{this.domainsOptions.push({label:`"${e.name}" - ${e.domainId}`,value:e.domainId})}))):this.showDomainOptions=!1}))},onChooseDomain(){this.showChooseDomains=!1,this.domainID=this.currentDomainOption},refreshSettingsValues(){return V(this,void 0,void 0,(function*(){this.values=yield S.Z.getValues(),this.isUserConnected=Boolean(this.accessToken)}))},saveSettings(){const e={metaverse:{access_token:this.accessToken,automatic_networking:this.automaticNetworking,enable_metadata_exporter:this.isHTTPMetadataEnabled,enable_packet_verification:this.isPacketVerificationEnabled,id:this.domainID,local_port:this.localUDPPort,metadata_exporter_port:this.metadataExporterPort}};S.Z.automaticCommitSettings(e)},toggleRestartServer(){this.restartServer=!this.restartServer}},computed:{showAutomaticNetworking(){return this.isUserConnected&&this.domainID.length>0},automaticNetworking:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.automatic_networking)&&void 0!==t?t:""},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.automatic_networking)&&(this.values.metaverse.automatic_networking=e,this.saveSettings())}},accessToken:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.access_token)&&void 0!==t?t:""},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.access_token)&&(this.values.metaverse.access_token=e,this.saveSettings())}},domainID:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.id)&&void 0!==t?t:"ID not found"},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.id)&&(this.values.metaverse.id=e,this.saveSettings())}},localUDPPort:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.local_port)&&void 0!==t?t:"local UDP port not found"},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.local_port)&&(this.values.metaverse.local_port=e,this.saveSettings())}},isPacketVerificationEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.enable_packet_verification)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.enable_packet_verification)&&(this.values.metaverse.enable_packet_verification=e,this.saveSettings())}},isHTTPMetadataEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.enable_metadata_exporter)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.enable_metadata_exporter)&&(this.values.metaverse.enable_metadata_exporter=e,this.saveSettings())}},metadataExporterPort:{get(){var e,t;return null!==(t=null===(e=this.values.metaverse)||void 0===e?void 0:e.metadata_exporter_port)&&void 0!==t?t:"not found"},set(e){var t;"undefined"!==typeof(null===(t=this.values.metaverse)||void 0===t?void 0:t.metadata_exporter_port)&&(this.values.metaverse.metadata_exporter_port=e,this.saveSettings())}}},beforeMount(){this.refreshSettingsValues()}});var P=n(4260),I=n(151),Z=n(5589),U=n(9367),A=n(8240),E=n(6778),O=n(5269),L=n(4842),M=n(4554),N=n(5869),R=n(429),Q=n(7208),$=n(6941),j=n(8886),Y=n(677),H=n(7518),z=n.n(H);const F=(0,P.Z)(T,[["render",C]]),G=F;z()(T,"components",{QCard:I.Z,QCardSection:Z.Z,QCardActions:U.Z,QBtn:A.Z,QDialog:E.Z,QForm:O.Z,QInput:L.Z,QIcon:M.Z,QSeparator:N.Z,QExpansionItem:R.Z,QSelect:Q.Z,QInnerLoading:$.Z,QToggle:j.Z}),z()(T,"directives",{ClosePopup:Y.Z});const J=(0,o._)("div",{class:"text-h5 text-center text-weight-bold q-mb-sm"},"WebRTC",-1),B=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Allow web clients to connect over WebRTC data channels.",-1),K=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},'Use secure WebSocket (wss:// protocol) for WebRTC signaling channel. If "on", the key, cert, and CA files are expected to be in the local Vircadia app directory, in a /domain-server/ subdirectory with filenames vircadia-cert.key, vircadia-cert.crt, and vircadia-crt-ca.crt.',-1);function X(e,t,n,a,s,i){const l=(0,o.up)("q-separator"),r=(0,o.up)("q-toggle"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-card"),d=(0,o.up)("q-expansion-item");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,{class:"my-card q-mt-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[J,(0,o.Wm)(l),(0,o.Wm)(d,{modelValue:e.isWebRTCSettingsToggled,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isWebRTCSettingsToggled=t),class:"q-mt-md text-subtitle1",popup:"",icon:"settings",label:"Advanced Settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.isWebRTCConnectionsEnabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isWebRTCConnectionsEnabled=t),"checked-icon":"check",color:"positive",label:"Enable WebRTC Client Connections","unchecked-icon":"clear"},null,8,["modelValue"]),B])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.isWebsocketSSLEnabled,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isWebsocketSSLEnabled=t),"checked-icon":"check",color:"positive",label:"Enable WebRTC WebSocket SSL","unchecked-icon":"clear"},null,8,["modelValue"]),K])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var ee=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};const te=(0,o.aZ)({name:"WebRTCSettings",data(){return{isWebRTCSettingsToggled:!1,values:{}}},methods:{refreshSettingsValues(){return ee(this,void 0,void 0,(function*(){this.values=yield S.Z.getValues()}))},saveSettings(){const e={webrtc:{enable_webrtc:this.isWebRTCConnectionsEnabled,enable_webrtc_websocket_ssl:this.isWebsocketSSLEnabled}};S.Z.automaticCommitSettings(e)}},computed:{isWebRTCConnectionsEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.webrtc)||void 0===e?void 0:e.enable_webrtc)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.webrtc)||void 0===t?void 0:t.enable_webrtc)&&(this.values.webrtc.enable_webrtc=e,this.saveSettings())}},isWebsocketSSLEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.webrtc)||void 0===e?void 0:e.enable_webrtc_websocket_ssl)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.webrtc)||void 0===t?void 0:t.enable_webrtc_websocket_ssl)&&(this.values.webrtc.enable_webrtc_websocket_ssl=e,this.saveSettings())}}},beforeMount(){this.refreshSettingsValues()}}),ne=(0,P.Z)(te,[["render",X]]),oe=ne;z()(te,"components",{QCard:I.Z,QCardSection:Z.Z,QSeparator:N.Z,QExpansionItem:R.Z,QToggle:j.Z});const ae=(0,o._)("div",{class:"text-h5 text-center text-weight-bold q-mb-sm"},"WordPress OAuth2",-1),se=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Allow a WordPress-based (miniOrange) OAuth2 service to assign users to groups based on their role with the service.",-1),ie=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"The URL that the Interface will use to login via OAuth2.",-1),le=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},'The URL base that the domain server will use to make WordPress API calls. Typically "https://oursite.com/wp-json/". However, if using non-pretty permalinks or otherwise get a 404 error then try "https://oursite.com/?rest_route=/".',-1),re=(0,o._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This is the client ID from the WordPress plugin configuration.",-1);function ce(e,t,n,a,s,i){const l=(0,o.up)("q-separator"),r=(0,o.up)("q-toggle"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),d=(0,o.up)("q-card"),m=(0,o.up)("q-expansion-item");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(d,{class:"my-card q-mt-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[ae,(0,o.Wm)(l),(0,o.Wm)(m,{modelValue:e.isWordPressSettingsToggled,"onUpdate:modelValue":t[4]||(t[4]=t=>e.isWordPressSettingsToggled=t),class:"q-mt-md text-subtitle1",popup:"",icon:"settings",label:"WordPress OAuth2 Settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.isOauth2AuthenticationEnabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isOauth2AuthenticationEnabled=t),"checked-icon":"check",color:"positive",label:"Enable OAuth2 Authentication","unchecked-icon":"clear"},null,8,["modelValue"]),se])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.authenticationURL,"onUpdate:modelValue":t[1]||(t[1]=t=>e.authenticationURL=t),label:"Authentication URL"},null,8,["modelValue"]),ie])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.wordpressAPIURL,"onUpdate:modelValue":t[2]||(t[2]=t=>e.wordpressAPIURL=t),label:"WordPress API URL Base"},null,8,["modelValue"]),le])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.wordpressPluginID,"onUpdate:modelValue":t[3]||(t[3]=t=>e.wordpressPluginID=t),label:"WordPress Plugin Client ID"},null,8,["modelValue"]),re])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var ue=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?n(e.value):a(e.value).then(i,l)}r((o=o.apply(e,t||[])).next())}))};const de=(0,o.aZ)({name:"WordpressSettings",data(){return{isWordPressSettingsToggled:!1,values:{}}},methods:{refreshSettingsValues(){return ue(this,void 0,void 0,(function*(){this.values=yield S.Z.getValues()}))},saveSettings(){const e={authentication:{enable_oauth2:this.isOauth2AuthenticationEnabled,oauth2_url_path:this.authenticationURL,plugin_client_id:this.wordpressPluginID,wordpress_url_base:this.wordpressAPIURL}};S.Z.automaticCommitSettings(e)}},computed:{isOauth2AuthenticationEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.authentication)||void 0===e?void 0:e.enable_oauth2)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.authentication)||void 0===t?void 0:t.enable_oauth2)&&(this.values.authentication.enable_oauth2=e,this.saveSettings())}},authenticationURL:{get(){var e,t;return null!==(t=null===(e=this.values.authentication)||void 0===e?void 0:e.oauth2_url_path)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.authentication)||void 0===t?void 0:t.oauth2_url_path)&&(this.values.authentication.oauth2_url_path=e,this.saveSettings())}},wordpressAPIURL:{get(){var e,t;return null!==(t=null===(e=this.values.authentication)||void 0===e?void 0:e.wordpress_url_base)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.authentication)||void 0===t?void 0:t.wordpress_url_base)&&(this.values.authentication.wordpress_url_base=e,this.saveSettings())}},wordpressPluginID:{get(){var e,t;return null!==(t=null===(e=this.values.authentication)||void 0===e?void 0:e.plugin_client_id)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.authentication)||void 0===t?void 0:t.plugin_client_id)&&(this.values.authentication.plugin_client_id=e,this.saveSettings())}}},beforeMount(){this.refreshSettingsValues()}}),me=(0,P.Z)(de,[["render",ce]]),he=me;z()(de,"components",{QCard:I.Z,QCardSection:Z.Z,QSeparator:N.Z,QExpansionItem:R.Z,QToggle:j.Z,QInput:L.Z});const pe=(0,o.aZ)({name:"Networking",components:{MetaverseSettings:G,WebRTCSettings:oe,WordpressSettings:he}}),ve=(0,P.Z)(pe,[["render",s]]),we=ve}}]);