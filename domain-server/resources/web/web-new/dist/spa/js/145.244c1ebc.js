"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[145],{2145:(e,n,t)=>{t.r(n),t.d(n,{default:()=>G});var o=t(3673);const i={class:"row"};function l(e,n,t,l,s,a){const r=(0,o.up)("NodesList"),u=(0,o.up)("AssignmentsList");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(r,{class:"col-12 col-md"}),(0,o.Wm)(u,{class:"col-12 col-md"}),(0,o.Wm)(u,{class:"col-12 col-md"})])}var s=t(2323);const a={class:"q-pa-md"},r=(0,o._)("span",{class:"q-ml-sm"},"Are you sure you want to kill all nodes?",-1);function u(e,n,t,i,l,u){const c=(0,o.up)("q-avatar"),d=(0,o.up)("q-card-section"),p=(0,o.up)("q-btn"),m=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),h=(0,o.up)("q-td"),g=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(w,{modelValue:e.confirmKillAll,"onUpdate:modelValue":n[0]||(n[0]=n=>e.confirmKillAll=n),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"mdi-alert","text-color":"warning",size:"80px"}),r])),_:1}),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[v]]),(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Yes - Kill all",color:"primary",onClick:e.killAllNodes},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{title:"Nodes",rows:e.nodesList,columns:e.columns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination},{body:(0,o.w5)((n=>[(0,o.Wm)(g,{props:n},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"type",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.type),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"version",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.version),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.uuid),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"username",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.username),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"public",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.public.ip)+" : "+(0,s.zw)(n.row.public.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"local",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.local.ip)+" : "+(0,s.zw)(n.row.local.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uptime",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.row.uptime),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:n},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",onClick:t=>e.killNode(n.row.uuid),icon:"mdi-close-box",dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),bottom:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",label:"Kill all Nodes",onClick:n[1]||(n[1]=n=>e.confirmKillAll=!0),icon:"mdi-close-box-multiple"})])),_:1},8,["rows","columns","pagination"])])}var c=t(1959),d=t(7483),p=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{r(o.next(e))}catch(n){l(n)}}function a(e){try{r(o["throw"](e))}catch(n){l(n)}}function r(e){e.done?t(e.value):i(e.value).then(s,a)}r((o=o.apply(e,n||[])).next())}))};const m={getNodes(){return p(this,void 0,void 0,(function*(){try{const e="nodes.json",n=yield(0,d.YW)(e);return n.nodes}catch(n){const e=(0,d.GD)(n);console.log(`Exception while attempting to get nodes: ${e}`)}const e=[];return e}))},killNode(e){return p(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/"+e)}))},killAllNodes(){return p(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/")}))}};var f=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{r(o.next(e))}catch(n){l(n)}}function a(e){try{r(o["throw"](e))}catch(n){l(n)}}function r(e){e.done?t(e.value):i(e.value).then(s,a)}r((o=o.apply(e,n||[])).next())}))};const w=[{name:"type",align:"left",label:"Type",field:"type"},{name:"version",align:"left",label:"Version",field:"version"},{name:"uuid",align:"left",label:"UUID",field:"uuid",style:"max-width: 200px",headerStyle:"max-width: 200px"},{name:"username",align:"left",label:"Username",field:"username"},{name:"public",align:"left",label:"Public",field:"public"},{name:"local",align:"left",label:"Local",field:"local.ip"},{name:"uptime",align:"left",label:"Uptime (s)",field:"uptime"},{name:"kill",align:"left",label:"Kill ?",field:"uuid"}],h=(0,o.aZ)({name:"NodesList",data(){return{columns:w,pagination:{page:1,rowsPerPage:0},nodesList:[],timer:0,confirmKillAll:(0,c.iH)(!1)}},methods:{refreshNodesList(){return f(this,void 0,void 0,(function*(){const e=yield m.getNodes();this.nodesList=e}))},cancelAutoUpdate(){clearInterval(this.timer)},killNode(e){return f(this,void 0,void 0,(function*(){yield m.killNode(e)}))},killAllNodes(){return f(this,void 0,void 0,(function*(){yield m.killAllNodes()}))}},mounted(){this.refreshNodesList(),this.timer=window.setInterval(this.refreshNodesList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}});var g=t(4260),y=t(6778),v=t(151),b=t(5589),k=t(5096),A=t(9367),W=t(8240),q=t(3350),L=t(8186),U=t(3884),x=t(677),_=t(7518),N=t.n(_);const Z=(0,g.Z)(h,[["render",u]]),C=Z;N()(h,"components",{QDialog:y.Z,QCard:v.Z,QCardSection:b.Z,QAvatar:k.Z,QCardActions:A.Z,QBtn:W.Z,QTable:q.Z,QTr:L.Z,QTd:U.Z}),N()(h,"directives",{ClosePopup:x.Z});const Q={class:"q-pa-md"};function z(e,n,t,i,l,s){const a=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",Q,[(0,o.Wm)(a,{title:"Queued Assignment Clients",rows:e.queuedList,columns:e.queuedColumns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination,"hide-bottom":""},null,8,["rows","columns","pagination"])])}var P=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{r(o.next(e))}catch(n){l(n)}}function a(e){try{r(o["throw"](e))}catch(n){l(n)}}function r(e){e.done?t(e.value):i(e.value).then(s,a)}r((o=o.apply(e,n||[])).next())}))};const D={getAllAssignments(){return P(this,void 0,void 0,(function*(){const e={fulfilled:[],queued:[]};try{const n="assignments.json",t=yield(0,d.YW)(n);return Object.entries(t.fulfilled).forEach((([n,t])=>{t.id=n,e.fulfilled.push(t)})),Object.entries(t.queued).forEach((([n,t])=>{t.id=n,e.queued.push(t)})),e}catch(n){const e=(0,d.GD)(n);console.log(`Exception while attempting to get assignments: ${e}`)}return e}))}};var T=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{r(o.next(e))}catch(n){l(n)}}function a(e){try{r(o["throw"](e))}catch(n){l(n)}}function r(e){e.done?t(e.value):i(e.value).then(s,a)}r((o=o.apply(e,n||[])).next())}))};const I=[{name:"type",align:"left",label:"Type",field:"type"},{name:"id",align:"left",label:"UUID",field:"id"}],K=(0,o.aZ)({name:"AssignmentsList",data(){return{queuedColumns:I,pagination:{page:1,rowsPerPage:0},fulfilledList:[],queuedList:[],timer:0}},methods:{refreshAssignmentsList(){return T(this,void 0,void 0,(function*(){const e=yield D.getAllAssignments();this.fulfilledList=e.fulfilled,this.queuedList=e.queued}))},cancelAutoUpdate(){clearInterval(this.timer)}},mounted(){this.refreshAssignmentsList(),this.timer=window.setInterval(this.refreshAssignmentsList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}}),j=(0,g.Z)(K,[["render",z]]),E=j;N()(K,"components",{QTable:q.Z});const V=(0,o.aZ)({name:"Index",components:{NodesList:C,AssignmentsList:E}}),Y=(0,g.Z)(V,[["render",l]]),G=Y}}]);