"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[35],{5593:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(7483),l=i(8563),a=function(e,t,i,n){function l(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(t){a(t)}}function s(e){try{r(n["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):l(e.value).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const o=i(52),s=[],r={getValues(){return a(this,void 0,void 0,(function*(){let e={};try{const t="settings.json",i=yield(0,n.YW)(t);return e=i.values,e}catch(t){const e=(0,n.GD)(t);console.log(e)}return e}))},getDescriptions(){return a(this,void 0,void 0,(function*(){let e=[];try{const t="settings.json",i=yield(0,n.YW)(t);return e=i.descriptions,e}catch(t){const e=(0,n.GD)(t);console.log(e)}return e}))},commitSettings(e){return o.post("/settings.json",JSON.stringify(e)).then((()=>(l.Z.info(l.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((e=>(l.Z.error(l.Z.types.DOMAIN,`Failed to commit settings to Domain: ${e}`),!1)))},automaticCommitSettings(e){s.forEach(((e,t)=>{clearTimeout(e),s.splice(t,1)})),s.push(window.setTimeout(this.commitSettings,5e3,e))},createNewDomainID(e){return a(this,void 0,void 0,(function*(){try{const t=`label=${e}`,i=yield o.post("/api/domains",t);if("failure"===i.data.status)return"";const n=i.data.domain.domainId;return n}catch(t){return console.log(t),""}}))},getDomains(){return a(this,void 0,void 0,(function*(){let e=[];try{const t="api/domains",i=yield(0,n.YW)(t);return e=i.data.domains,e}catch(t){console.log(t)}return e}))}}},7483:(e,t,i)=>{i.d(t,{ge:()=>u,YW:()=>c,GD:()=>s});var n=i(52),l=i.n(n);const a="http://localhost:40100/";var o=function(e,t,i,n){function l(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(t){a(t)}}function s(e){try{r(n["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):l(e.value).then(o,s)}r((n=n.apply(e,t||[])).next())}))};function s(e){if("string"===typeof e)return e;const t=e;return"message"in t?t.message:`Error: ${JSON.stringify(e)}`}function r(e,t){return(null!==t&&void 0!==t?t:a)+e}function c(e,t){var i;return o(this,void 0,void 0,(function*(){const n=r(e,t);let a="";try{const t=yield l().get(n);if(t&&t.status){if(200===t.status)return t.data;a=`${null!==(i=t.statusText)&&void 0!==i?i:"unspecified"}`}else a=`Poorly formed response to GET ${e}: ${JSON.stringify(t)}`}catch(o){const t=s(o);a=`Exception on GET ${e}: ${t}`,console.log(a)}throw new Error(a)}))}function u(e,t){var i;return o(this,void 0,void 0,(function*(){const n=r(e,t);let a="";try{const t=yield l()["delete"](n);if(t&&t.status){if(200===t.status)return;a=`${null!==(i=t.statusText)&&void 0!==i?i:"unspecified"}`}else a=`Poorly formed response to DELETE ${e}: ${JSON.stringify(t)}`}catch(o){const t=s(o);a=`Exception on DELETE ${e}: ${t}`,console.log(a)}throw new Error(a)}))}},8035:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=i(3673);const l={class:"q-pa-md"};function a(e,t,i,a,o,s){const r=(0,n.up)("SSLClientSettings"),c=(0,n.up)("MonitoringSettings");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(r),(0,n.Wm)(c)])}const o=(0,n._)("div",{class:"text-h5 text-center text-weight-bold q-mb-sm"},"SSL ACME Client",-1),s=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Enables ACME client that will manage the SSL certificates.",-1),r=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"URL of the certificate issuer ACME directory endpoint.",-1),c=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Use ZeroSSL Rest API Instead of ACME protocol.",-1),u=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Path to private key used to communicate with certificate issuer.",-1),d=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"API key to use for ZeroSSL REST API requests.",-1),m=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Certificate files will be stored in this directory.",-1),h=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Certificate will be stored with this filename in Certificate Directory.",-1),v=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Certificate private key will be stored with this filename in Certificate Directory.",-1),p=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Trusted certificate authority list will be stored with this filename in Certificate Directory. If unspecified system default CAs will be used.",-1),f=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This settings determines how the client will attempt to complete the server's HTTP challenges. Possible Values are: server - client will attempt to host the challenges on port 80, files - client will attempt to save challenges as files in the directories associated with specified domains, manual - client will wait for a few minutes for the challenges to be completed.",-1);function g(e,t,i,l,a,g){const y=(0,n.up)("q-separator"),_=(0,n.up)("q-toggle"),x=(0,n.up)("q-card-section"),b=(0,n.up)("q-input"),S=(0,n.up)("q-icon"),w=(0,n.up)("q-select"),V=(0,n.up)("q-card"),E=(0,n.up)("q-expansion-item");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(V,{class:"my-card"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[o,(0,n.Wm)(y),(0,n.Wm)(E,{modelValue:e.isSSLClientSettingsToggled,"onUpdate:modelValue":t[12]||(t[12]=t=>e.isSSLClientSettingsToggled=t),class:"q-mt-md text-subtitle1",popup:"",icon:"settings",label:"Advanced Settings"},{default:(0,n.w5)((()=>[(0,n.Wm)(V,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:e.isSSLClientEnabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isSSLClientEnabled=t),"checked-icon":"check",color:"positive",label:"Enable ACME Client","unchecked-icon":"clear"},null,8,["modelValue"]),s])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.directoryEndpoint,"onUpdate:modelValue":t[1]||(t[1]=t=>e.directoryEndpoint=t),label:"ACME Directory Endpoint"},null,8,["modelValue"]),r])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:e.isZeroSSLEnabled,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isZeroSSLEnabled=t),"checked-icon":"check",color:"positive",label:"Enable ZeroSSL REST API","unchecked-icon":"clear"},null,8,["modelValue"]),c])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.accountKeyPath,"onUpdate:modelValue":t[3]||(t[3]=t=>e.accountKeyPath=t),label:"Account Key Path",placeholder:"<Application Data Path>/acme_account_key.pem"},null,8,["modelValue"]),u])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.zeroSslAPIKey,"onUpdate:modelValue":t[4]||(t[4]=t=>e.zeroSslAPIKey=t),label:"ZeroSSL API Key"},null,8,["modelValue"]),d])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.externalAccountBindingKID,"onUpdate:modelValue":t[5]||(t[5]=t=>e.externalAccountBindingKID=t),label:"External Account Binding KID"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.externalAccountBindingMAC,"onUpdate:modelValue":t[6]||(t[6]=t=>e.externalAccountBindingMAC=t),label:"External Account Binding MAC"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.certificateDirectory,"onUpdate:modelValue":t[7]||(t[7]=t=>e.certificateDirectory=t),label:"Certificate Directory",placeholder:"Application Data Path"},null,8,["modelValue"]),m])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.certificateFilename,"onUpdate:modelValue":t[8]||(t[8]=t=>e.certificateFilename=t),label:"Certificate Filename"},null,8,["modelValue"]),h])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.certificateKeyFilename,"onUpdate:modelValue":t[9]||(t[9]=t=>e.certificateKeyFilename=t),label:"Certificate Key Filename"},null,8,["modelValue"]),v])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.certificateAuthorityFilename,"onUpdate:modelValue":t[10]||(t[10]=t=>e.certificateAuthorityFilename=t),label:"Certificate Authority Filename",placeholder:"System Default"},null,8,["modelValue"]),p])),_:1}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{standout:"bg-primary text-white",color:"primary","emit-value":"","map-options":"",modelValue:e.challengeHandler,"onUpdate:modelValue":t[11]||(t[11]=t=>e.challengeHandler=t),options:e.challengeHandlerOptions,label:"Type of HTTP Challenge Handler","transition-show":"jump-up","transition-hide":"jump-down"},{prepend:(0,n.w5)((()=>[(0,n.Wm)(S,{name:"https"})])),_:1},8,["modelValue","options"]),f])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var y=i(5593),_=function(e,t,i,n){function l(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(t){a(t)}}function s(e){try{r(n["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):l(e.value).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const x=(0,n.aZ)({name:"SSLClientSettings",data(){return{isSSLClientSettingsToggled:!1,values:{},challengeHandlerOptions:[{label:"SERVER: client will attempt to host the challenges on port 80",value:"server"},{label:"FILES: client will attempt to save challenges as files in the directories associated with specified domains",value:"files"},{label:"MANUAL: client will wait for a few minutes for the challenges to be completed",value:"manual"}]}},methods:{refreshSettingsValues(){return _(this,void 0,void 0,(function*(){this.values=yield y.Z.getValues()}))},saveSettings(){const e={acme:{enable_client:this.isSSLClientEnabled,directory_endpoint:this.directoryEndpoint,zerossl_rest_api:this.isZeroSSLEnabled,account_key_path:this.accountKeyPath,zerossl_api_key:this.zeroSslAPIKey,eab_kid:this.externalAccountBindingKID,eab_mac:this.externalAccountBindingMAC,certificate_directory:this.certificateDirectory,certificate_filename:this.certificateFilename,certificate_key_filename:this.certificateKeyFilename,certificate_authority_filename:this.certificateAuthorityFilename,challenge_handler_type:this.challengeHandler}};y.Z.automaticCommitSettings(e)}},computed:{isSSLClientEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.enable_client)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.enable_client)&&(this.values.acme.enable_client=e,this.saveSettings())}},directoryEndpoint:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.directory_endpoint)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.directory_endpoint)&&(this.values.acme.directory_endpoint=e,this.saveSettings())}},isZeroSSLEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.zerossl_rest_api)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.zerossl_rest_api)&&(this.values.acme.zerossl_rest_api=e,this.saveSettings())}},accountKeyPath:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.account_key_path)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.account_key_path)&&(this.values.acme.account_key_path=e,this.saveSettings())}},zeroSslAPIKey:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.zerossl_api_key)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.zerossl_api_key)&&(this.values.acme.zerossl_api_key=e,this.saveSettings())}},externalAccountBindingKID:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.eab_kid)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.eab_kid)&&(this.values.acme.eab_kid=e,this.saveSettings())}},externalAccountBindingMAC:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.eab_mac)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.eab_mac)&&(this.values.acme.eab_mac=e,this.saveSettings())}},certificateDirectory:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.certificate_directory)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.certificate_directory)&&(this.values.acme.certificate_directory=e,this.saveSettings())}},certificateFilename:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.certificate_filename)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.certificate_filename)&&(this.values.acme.certificate_filename=e,this.saveSettings())}},certificateKeyFilename:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.certificate_key_filename)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.certificate_key_filename)&&(this.values.acme.certificate_key_filename=e,this.saveSettings())}},certificateAuthorityFilename:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.certificate_authority_filename)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.certificate_authority_filename)&&(this.values.acme.certificate_authority_filename=e,this.saveSettings())}},challengeHandler:{get(){var e,t;return null!==(t=null===(e=this.values.acme)||void 0===e?void 0:e.challenge_handler_type)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.acme)||void 0===t?void 0:t.challenge_handler_type)&&(this.values.acme.challenge_handler_type=e,this.saveSettings())}}},beforeMount(){this.refreshSettingsValues()}});var b=i(4260),S=i(151),w=i(5589),V=i(5869),E=i(429),q=i(8886),A=i(4842),C=i(7637),W=i(4554),P=i(7518),k=i.n(P);const Z=(0,b.Z)(x,[["render",g]]),D=Z;k()(x,"components",{QCard:S.Z,QCardSection:w.Z,QSeparator:V.Z,QExpansionItem:E.Z,QToggle:q.Z,QInput:A.Z,QSelect:C.Z,QIcon:W.Z});const T=(0,n._)("div",{class:"text-h5 text-center text-weight-bold q-mb-sm"},"Monitoring",-1),I=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"Enable a Prometheus exporter to make it possible to gather stats about the mixers that are available in the Nodes tab with a Prometheus server. This makes it possible to keep track of long-term domain statistics for graphing, troubleshooting, and performance monitoring.",-1),L=(0,n._)("div",{class:"q-ml-xs q-mt-xs text-caption text-grey-5"},"This is the port where the Prometheus exporter accepts connections. It listens both on IPv4 and IPv6 and can be accessed remotely, so you should make sure to restrict access with a firewall as needed.",-1);function M(e,t,i,l,a,o){const s=(0,n.up)("q-separator"),r=(0,n.up)("q-toggle"),c=(0,n.up)("q-card-section"),u=(0,n.up)("q-input"),d=(0,n.up)("q-card"),m=(0,n.up)("q-expansion-item");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(d,{class:"my-card q-mt-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[T,(0,n.Wm)(s),(0,n.Wm)(m,{modelValue:e.isMonitoringSettingsToggled,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isMonitoringSettingsToggled=t),class:"q-mt-md text-subtitle1",popup:"",icon:"settings",label:"Advanced Settings"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:e.isPrometheusExporterEnabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isPrometheusExporterEnabled=t),"checked-icon":"check",color:"positive",label:"Enable Prometheus Exporter","unchecked-icon":"clear"},null,8,["modelValue"]),I])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{standout:"bg-primary text-white",class:"text-subtitle1",modelValue:e.prometheusPort,"onUpdate:modelValue":t[1]||(t[1]=t=>e.prometheusPort=t),label:"Prometheus TCP Port"},null,8,["modelValue"]),L])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var K=function(e,t,i,n){function l(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(t){a(t)}}function s(e){try{r(n["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):l(e.value).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const U=(0,n.aZ)({name:"MonitoringSettings",data(){return{isMonitoringSettingsToggled:!1,values:{}}},methods:{refreshSettingsValues(){return K(this,void 0,void 0,(function*(){this.values=yield y.Z.getValues()}))},saveSettings(){const e={monitoring:{enable_prometheus_exporter:this.isPrometheusExporterEnabled,prometheus_exporter_port:this.prometheusPort}};y.Z.automaticCommitSettings(e)}},computed:{isPrometheusExporterEnabled:{get(){var e,t;return null!==(t=null===(e=this.values.monitoring)||void 0===e?void 0:e.enable_prometheus_exporter)&&void 0!==t&&t},set(e){var t;"undefined"!==typeof(null===(t=this.values.monitoring)||void 0===t?void 0:t.enable_prometheus_exporter)&&(this.values.monitoring.enable_prometheus_exporter=e,this.saveSettings())}},prometheusPort:{get(){var e,t;return null!==(t=null===(e=this.values.monitoring)||void 0===e?void 0:e.prometheus_exporter_port)&&void 0!==t?t:"error"},set(e){var t;"undefined"!==typeof(null===(t=this.values.monitoring)||void 0===t?void 0:t.prometheus_exporter_port)&&(this.values.monitoring.prometheus_exporter_port=e,this.saveSettings())}}},beforeMount(){this.refreshSettingsValues()}}),F=(0,b.Z)(U,[["render",M]]),Q=F;k()(U,"components",{QCard:S.Z,QCardSection:w.Z,QSeparator:V.Z,QExpansionItem:E.Z,QToggle:q.Z,QInput:A.Z});const $=(0,n.aZ)({name:"Networking",components:{SSLClientSettings:D,MonitoringSettings:Q}}),z=(0,b.Z)($,[["render",a]]),B=z}}]);