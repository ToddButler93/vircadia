"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[862],{7483:(e,t,n)=>{n.d(t,{ge:()=>c,YW:()=>u,GD:()=>r});var o=n(52),i=n.n(o);const l="http://localhost:40100/";var s=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function s(e){try{a(o.next(e))}catch(t){l(t)}}function r(e){try{a(o["throw"](e))}catch(t){l(t)}}function a(e){e.done?n(e.value):i(e.value).then(s,r)}a((o=o.apply(e,t||[])).next())}))};function r(e){if("string"===typeof e)return e;const t=e;return"message"in t?t.message:`Error: ${JSON.stringify(e)}`}function a(e,t){return(null!==t&&void 0!==t?t:l)+e}function u(e,t){var n;return s(this,void 0,void 0,(function*(){const o=a(e,t);let l="";try{const t=yield i().get(o);if(t&&t.status){if(200===t.status)return t.data;l=`${null!==(n=t.statusText)&&void 0!==n?n:"unspecified"}`}else l=`Poorly formed response to GET ${e}: ${JSON.stringify(t)}`}catch(s){const t=r(s);l=`Exception on GET ${e}: ${t}`,console.log(l)}throw new Error(l)}))}function c(e,t){var n;return s(this,void 0,void 0,(function*(){const o=a(e,t);let l="";try{const t=yield i()["delete"](o);if(t&&t.status){if(200===t.status)return;l=`${null!==(n=t.statusText)&&void 0!==n?n:"unspecified"}`}else l=`Poorly formed response to DELETE ${e}: ${JSON.stringify(t)}`}catch(s){const t=r(s);l=`Exception on DELETE ${e}: ${t}`,console.log(l)}throw new Error(l)}))}},8862:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(3673);const i={class:"row"};function l(e,t,n,l,s,r){const a=(0,o.up)("NodesList"),u=(0,o.up)("AssignmentsList");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(a,{class:"col-12 col-md"}),(0,o.Wm)(u,{class:"col-12 col-md"})])}var s=n(2323);const r={class:"q-pa-md"},a=(0,o._)("span",{class:"q-ml-sm"},"Are you sure you want to kill all nodes?",-1);function u(e,t,n,i,l,u){const c=(0,o.up)("q-avatar"),d=(0,o.up)("q-card-section"),p=(0,o.up)("q-btn"),f=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),h=(0,o.up)("q-td"),g=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(w,{modelValue:e.confirmKillAll,"onUpdate:modelValue":t[0]||(t[0]=t=>e.confirmKillAll=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"mdi-alert","text-color":"warning",size:"80px"}),a])),_:1}),(0,o.Wm)(f,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[v]]),(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Yes - Kill all",color:"primary",onClick:e.killAllNodes},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{title:"Nodes",rows:e.nodesList,columns:e.columns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination},{body:(0,o.w5)((t=>[(0,o.Wm)(g,{props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"type",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.type),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"version",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.version),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.uuid),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"username",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.username),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"public",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.public.ip)+" : "+(0,s.zw)(t.row.public.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"local",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.local.ip)+" : "+(0,s.zw)(t.row.local.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uptime",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.row.uptime),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",onClick:n=>e.killNode(t.row.uuid),icon:"mdi-close-box",dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),bottom:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",label:"Kill all Nodes",onClick:t[1]||(t[1]=t=>e.confirmKillAll=!0),icon:"mdi-close-box-multiple"})])),_:1},8,["rows","columns","pagination"])])}var c=n(1959),d=n(7483),p=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function s(e){try{a(o.next(e))}catch(t){l(t)}}function r(e){try{a(o["throw"](e))}catch(t){l(t)}}function a(e){e.done?n(e.value):i(e.value).then(s,r)}a((o=o.apply(e,t||[])).next())}))};const f={getNodes(){return p(this,void 0,void 0,(function*(){try{const e="nodes.json",t=yield(0,d.YW)(e);return t.nodes}catch(t){const e=(0,d.GD)(t);console.log(`Exception while attempting to get nodes: ${e}`)}const e=[];return e}))},killNode(e){return p(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/"+e)}))},killAllNodes(){return p(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/")}))}};var m=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function s(e){try{a(o.next(e))}catch(t){l(t)}}function r(e){try{a(o["throw"](e))}catch(t){l(t)}}function a(e){e.done?n(e.value):i(e.value).then(s,r)}a((o=o.apply(e,t||[])).next())}))};const w=[{name:"type",align:"left",label:"Type",field:"type"},{name:"version",align:"left",label:"Version",field:"version"},{name:"uuid",align:"left",label:"UUID",field:"uuid",style:"max-width: 200px",headerStyle:"max-width: 200px"},{name:"username",align:"left",label:"Username",field:"username"},{name:"public",align:"left",label:"Public",field:"public"},{name:"local",align:"left",label:"Local",field:"local.ip"},{name:"uptime",align:"left",label:"Uptime (s)",field:"uptime"},{name:"kill",align:"left",label:"Kill ?",field:"uuid"}],h=(0,o.aZ)({name:"NodesList",data(){return{columns:w,pagination:{page:1,rowsPerPage:0},nodesList:[],timer:0,confirmKillAll:(0,c.iH)(!1)}},methods:{refreshNodesList(){return m(this,void 0,void 0,(function*(){const e=yield f.getNodes();this.nodesList=e}))},cancelAutoUpdate(){clearInterval(this.timer)},killNode(e){return m(this,void 0,void 0,(function*(){yield f.killNode(e)}))},killAllNodes(){return m(this,void 0,void 0,(function*(){yield f.killAllNodes()}))}},mounted(){this.refreshNodesList(),this.timer=window.setInterval(this.refreshNodesList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}});var g=n(4260),y=n(6778),v=n(151),b=n(5589),k=n(5096),A=n(9367),x=n(8240),W=n(3350),L=n(8186),q=n(3884),N=n(677),U=n(7518),_=n.n(U);const E=(0,g.Z)(h,[["render",u]]),Z=E;_()(h,"components",{QDialog:y.Z,QCard:v.Z,QCardSection:b.Z,QAvatar:k.Z,QCardActions:A.Z,QBtn:x.Z,QTable:W.Z,QTr:L.Z,QTd:q.Z}),_()(h,"directives",{ClosePopup:N.Z});const C={class:"q-pa-md"};function T(e,t,n,i,l,s){const r=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",C,[(0,o.Wm)(r,{title:"Queued Assignment Clients",rows:e.queuedList,columns:e.queuedColumns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination,"hide-bottom":""},null,8,["rows","columns","pagination"])])}var P=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function s(e){try{a(o.next(e))}catch(t){l(t)}}function r(e){try{a(o["throw"](e))}catch(t){l(t)}}function a(e){e.done?n(e.value):i(e.value).then(s,r)}a((o=o.apply(e,t||[])).next())}))};const $={getAllAssignments(){return P(this,void 0,void 0,(function*(){const e={fulfilled:[],queued:[]};try{const t="assignments.json",n=yield(0,d.YW)(t);return Object.entries(n.fulfilled).forEach((([t,n])=>{n.id=t,e.fulfilled.push(n)})),Object.entries(n.queued).forEach((([t,n])=>{n.id=t,e.queued.push(n)})),e}catch(t){const e=(0,d.GD)(t);console.log(`Exception while attempting to get assignments: ${e}`)}return e}))}};var Q=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function s(e){try{a(o.next(e))}catch(t){l(t)}}function r(e){try{a(o["throw"](e))}catch(t){l(t)}}function a(e){e.done?n(e.value):i(e.value).then(s,r)}a((o=o.apply(e,t||[])).next())}))};const D=[{name:"type",align:"left",label:"Type",field:"type"},{name:"id",align:"left",label:"UUID",field:"id"}],z=(0,o.aZ)({name:"AssignmentsList",data(){return{queuedColumns:D,pagination:{page:1,rowsPerPage:0},fulfilledList:[],queuedList:[],timer:0}},methods:{refreshAssignmentsList(){return Q(this,void 0,void 0,(function*(){const e=yield $.getAllAssignments();this.fulfilledList=e.fulfilled,this.queuedList=e.queued}))},cancelAutoUpdate(){clearInterval(this.timer)}},mounted(){this.refreshAssignmentsList(),this.timer=window.setInterval(this.refreshAssignmentsList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}}),I=(0,g.Z)(z,[["render",T]]),K=I;_()(z,"components",{QTable:W.Z});const G=(0,o.aZ)({name:"Index",components:{NodesList:Z,AssignmentsList:K},methods:{}}),O=(0,g.Z)(G,[["render",l]]),S=O}}]);