"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[34],{3034:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var i=t(3673);function o(e,n,t,o,l,s){const r=(0,i.up)("NodesList"),a=(0,i.up)("AssignmentsList");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r),(0,i.Wm)(a)])}var l=t(2323);const s={class:"q-pa-md"},r=(0,i._)("span",{class:"q-ml-sm"},"Are you sure you want to kill all nodes?",-1);function a(e,n,t,o,a,u){const d=(0,i.up)("q-avatar"),c=(0,i.up)("q-card-section"),p=(0,i.up)("q-btn"),m=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),h=(0,i.up)("q-td"),g=(0,i.up)("q-tr"),y=(0,i.up)("q-table"),v=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(w,{modelValue:e.confirmKillAll,"onUpdate:modelValue":n[0]||(n[0]=n=>e.confirmKillAll=n),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"mdi-alert","text-color":"warning",size:"80px"}),r])),_:1}),(0,i.Wm)(m,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[v]]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Yes - Kill all",color:"primary",onClick:e.killAllNodes},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(y,{title:"Nodes",rows:e.nodesList,columns:e.columns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination},{body:(0,i.w5)((n=>[(0,i.Wm)(g,{props:n},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{key:"type",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.type),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"version",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.version),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"uuid",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.uuid),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"username",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.username),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"public",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.public.ip)+" : "+(0,l.zw)(n.row.public.port),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"local",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.local.ip)+" : "+(0,l.zw)(n.row.local.port),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"uptime",props:n},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.row.uptime),1)])),_:2},1032,["props"]),(0,i.Wm)(h,{key:"uuid",props:n},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{color:"red",onClick:t=>e.killNode(n.row.uuid),icon:"mdi-close-box",dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),bottom:(0,i.w5)((()=>[(0,i.Wm)(p,{color:"red",label:"Kill all Nodes",onClick:n[1]||(n[1]=n=>e.confirmKillAll=!0),icon:"mdi-close-box-multiple"})])),_:1},8,["rows","columns","pagination"])])}var u=t(1959),d=t(7483),c=function(e,n,t,i){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(i.next(e))}catch(n){l(n)}}function r(e){try{a(i["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):o(e.value).then(s,r)}a((i=i.apply(e,n||[])).next())}))};const p={getNodes(){return c(this,void 0,void 0,(function*(){try{const e="nodes.json",n=yield(0,d.YW)(e);return n.nodes}catch(n){const e=(0,d.GD)(n);console.log(`Exception while attempting to get nodes: ${e}`)}const e=[];return e}))},killNode(e){return c(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/"+e)}))},killAllNodes(){return c(this,void 0,void 0,(function*(){yield(0,d.ge)("nodes/")}))}};var m=function(e,n,t,i){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(i.next(e))}catch(n){l(n)}}function r(e){try{a(i["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):o(e.value).then(s,r)}a((i=i.apply(e,n||[])).next())}))};const f=[{name:"type",align:"left",label:"Type",field:"type"},{name:"version",align:"left",label:"Version",field:"version"},{name:"uuid",align:"left",label:"UUID",field:"uuid",style:"max-width: 200px",headerStyle:"max-width: 200px"},{name:"username",align:"left",label:"Username",field:"username"},{name:"public",align:"left",label:"Public",field:"public"},{name:"local",align:"left",label:"Local",field:"local.ip"},{name:"uptime",align:"left",label:"Uptime (s)",field:"uptime"},{name:"kill",align:"left",label:"Kill ?",field:"uuid"}],w=(0,i.aZ)({name:"NodesList",data(){return{columns:f,pagination:{page:1,rowsPerPage:0},nodesList:[],timer:0,confirmKillAll:(0,u.iH)(!1)}},methods:{refreshNodesList(){return m(this,void 0,void 0,(function*(){const e=yield p.getNodes();this.nodesList=e}))},cancelAutoUpdate(){clearInterval(this.timer)},killNode(e){return m(this,void 0,void 0,(function*(){yield p.killNode(e)}))},killAllNodes(){return m(this,void 0,void 0,(function*(){yield p.killAllNodes()}))}},mounted(){this.refreshNodesList(),this.timer=window.setInterval(this.refreshNodesList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}});var h=t(4260),g=t(6778),y=t(151),v=t(5589),b=t(5096),k=t(9367),A=t(8240),W=t(3350),q=t(8186),L=t(3884),U=t(677),x=t(7518),_=t.n(x);const N=(0,h.Z)(w,[["render",a]]),Z=N;_()(w,"components",{QDialog:g.Z,QCard:y.Z,QCardSection:v.Z,QAvatar:b.Z,QCardActions:k.Z,QBtn:A.Z,QTable:W.Z,QTr:q.Z,QTd:L.Z}),_()(w,"directives",{ClosePopup:U.Z});const C={class:"q-pa-md"};function Q(e,n,t,o,l,s){const r=(0,i.up)("q-table");return(0,i.wg)(),(0,i.iD)("div",C,[(0,i.Wm)(r,{title:"Queued Assignment Clients",rows:e.queuedList,columns:e.queuedColumns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination,"hide-bottom":""},null,8,["rows","columns","pagination"])])}var z=function(e,n,t,i){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(i.next(e))}catch(n){l(n)}}function r(e){try{a(i["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):o(e.value).then(s,r)}a((i=i.apply(e,n||[])).next())}))};const P={getAllAssignments(){return z(this,void 0,void 0,(function*(){const e={fulfilled:[],queued:[]};try{const n="assignments.json",t=yield(0,d.YW)(n);return Object.entries(t.fulfilled).forEach((([n,t])=>{t.id=n,e.fulfilled.push(t)})),Object.entries(t.queued).forEach((([n,t])=>{t.id=n,e.queued.push(t)})),e}catch(n){const e=(0,d.GD)(n);console.log(`Exception while attempting to get assignments: ${e}`)}return e}))}};var D=function(e,n,t,i){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(i.next(e))}catch(n){l(n)}}function r(e){try{a(i["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):o(e.value).then(s,r)}a((i=i.apply(e,n||[])).next())}))};const T=[{name:"type",align:"left",label:"Type",field:"type"},{name:"id",align:"left",label:"UUID",field:"id"}],I=(0,i.aZ)({name:"AssignmentsList",data(){return{queuedColumns:T,pagination:{page:1,rowsPerPage:0},fulfilledList:[],queuedList:[],timer:0}},methods:{refreshAssignmentsList(){return D(this,void 0,void 0,(function*(){const e=yield P.getAllAssignments();this.fulfilledList=e.fulfilled,this.queuedList=e.queued}))},cancelAutoUpdate(){clearInterval(this.timer)}},mounted(){this.refreshAssignmentsList(),this.timer=window.setInterval(this.refreshAssignmentsList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}}),K=(0,h.Z)(I,[["render",Q]]),j=K;_()(I,"components",{QTable:W.Z});const E=(0,i.aZ)({name:"Index",components:{NodesList:Z,AssignmentsList:j},methods:{}}),V=(0,h.Z)(E,[["render",o]]),Y=V}}]);