"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[313],{1313:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var o=t(3673);function i(e,n,t,i,l,s){const r=(0,o.up)("NodesList"),a=(0,o.up)("AssignmentsList");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o.Wm)(a)])}var l=t(2323);const s={class:"q-pa-md"},r=(0,o._)("span",{class:"q-ml-sm"},"Are you sure you want to kill all nodes?",-1);function a(e,n,t,i,a,u){const c=(0,o.up)("q-avatar"),d=(0,o.up)("q-card-section"),p=(0,o.up)("q-btn"),f=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),h=(0,o.up)("q-td"),g=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(w,{modelValue:e.confirmKillAll,"onUpdate:modelValue":n[0]||(n[0]=n=>e.confirmKillAll=n),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"mdi-alert","text-color":"warning",size:"80px"}),r])),_:1}),(0,o.Wm)(f,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[v]]),(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Yes - Kill all",color:"primary",onClick:e.killAllNodes},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{title:"Nodes",rows:e.nodesList,columns:e.columns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination},{body:(0,o.w5)((n=>[(0,o.Wm)(g,{props:n},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"type",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.type),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"version",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.version),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.uuid),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"username",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.username),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"public",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.public.ip)+" : "+(0,l.zw)(n.row.public.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"local",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.local.ip)+" : "+(0,l.zw)(n.row.local.port),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uptime",props:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.row.uptime),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"uuid",props:n},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",onClick:t=>e.killNode(n.row.uuid),icon:"mdi-close-box",dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),bottom:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"red",label:"Kill all Nodes",onClick:n[1]||(n[1]=n=>e.confirmKillAll=!0),icon:"mdi-close-box-multiple"})])),_:1},8,["rows","columns","pagination"])])}var u=t(1959),c=t(52),d=t.n(c);const p="http://localhost:40100/";var f=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(o.next(e))}catch(n){l(n)}}function r(e){try{a(o["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((o=o.apply(e,n||[])).next())}))};function m(e){if("string"===typeof e)return e;const n=e;return"message"in n?n.message:`Error: ${JSON.stringify(e)}`}function w(e,n){return(null!==n&&void 0!==n?n:p)+e}function h(e,n){var t;return f(this,void 0,void 0,(function*(){const o=w(e,n);let i="";try{const n=yield d().get(o);if(n&&n.status){if(200===n.status)return n.data;i=`${null!==(t=n.statusText)&&void 0!==t?t:"unspecified"}`}else i=`Poorly formed response to GET ${e}: ${JSON.stringify(n)}`}catch(l){const n=m(l);i=`Exception on GET ${e}: ${n}`,console.log(i)}throw new Error(i)}))}function g(e,n){var t;return f(this,void 0,void 0,(function*(){const o=w(e,n);let i="";try{const n=yield d()["delete"](o);if(n&&n.status){if(200===n.status)return;i=`${null!==(t=n.statusText)&&void 0!==t?t:"unspecified"}`}else i=`Poorly formed response to DELETE ${e}: ${JSON.stringify(n)}`}catch(l){const n=m(l);i=`Exception on DELETE ${e}: ${n}`,console.log(i)}throw new Error(i)}))}var y=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(o.next(e))}catch(n){l(n)}}function r(e){try{a(o["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((o=o.apply(e,n||[])).next())}))};const v={getNodes(){return y(this,void 0,void 0,(function*(){try{const e="nodes.json",n=yield h(e);return n.nodes}catch(n){const e=m(n);console.log(`Exception while attempting to get nodes: ${e}`)}const e=[];return e}))},killNode(e){return y(this,void 0,void 0,(function*(){yield g("nodes/"+e)}))},killAllNodes(){return y(this,void 0,void 0,(function*(){yield g("nodes/")}))}};var b=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(o.next(e))}catch(n){l(n)}}function r(e){try{a(o["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((o=o.apply(e,n||[])).next())}))};const k=[{name:"type",align:"left",label:"Type",field:"type"},{name:"version",align:"left",label:"Version",field:"version"},{name:"uuid",align:"left",label:"UUID",field:"uuid",style:"max-width: 200px",headerStyle:"max-width: 200px"},{name:"username",align:"left",label:"Username",field:"username"},{name:"public",align:"left",label:"Public",field:"public"},{name:"local",align:"left",label:"Local",field:"local.ip"},{name:"uptime",align:"left",label:"Uptime (s)",field:"uptime"},{name:"kill",align:"left",label:"Kill ?",field:"uuid"}],A=(0,o.aZ)({name:"NodesList",data(){return{columns:k,pagination:{page:1,rowsPerPage:0},nodesList:[],timer:0,confirmKillAll:(0,u.iH)(!1)}},methods:{refreshNodesList(){return b(this,void 0,void 0,(function*(){const e=yield v.getNodes();this.nodesList=e}))},cancelAutoUpdate(){clearInterval(this.timer)},killNode(e){return b(this,void 0,void 0,(function*(){yield v.killNode(e)}))},killAllNodes(){return b(this,void 0,void 0,(function*(){yield v.killAllNodes()}))}},mounted(){this.refreshNodesList(),this.timer=window.setInterval(this.refreshNodesList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}});var x=t(4260),L=t(6778),q=t(151),W=t(5589),N=t(5096),U=t(9367),_=t(8240),E=t(8107),Z=t(8186),C=t(3884),T=t(677),P=t(7518),$=t.n(P);const Q=(0,x.Z)(A,[["render",a]]),z=Q;$()(A,"components",{QDialog:L.Z,QCard:q.Z,QCardSection:W.Z,QAvatar:N.Z,QCardActions:U.Z,QBtn:_.Z,QTable:E.Z,QTr:Z.Z,QTd:C.Z}),$()(A,"directives",{ClosePopup:T.Z});const D={class:"q-pa-md"};function I(e,n,t,i,l,s){const r=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",D,[(0,o.Wm)(r,{title:"Queued Assignment Clients",rows:e.queuedList,columns:e.queuedColumns,"row-key":"name","rows-per-page-options":[0],pagination:e.pagination,"hide-bottom":""},null,8,["rows","columns","pagination"])])}var K=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(o.next(e))}catch(n){l(n)}}function r(e){try{a(o["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((o=o.apply(e,n||[])).next())}))};const O={getAllAssignments(){return K(this,void 0,void 0,(function*(){const e={fulfilled:[],queued:[]};try{const n="assignments.json",t=yield h(n);return Object.entries(t.fulfilled).forEach((([n,t])=>{t.id=n,e.fulfilled.push(t)})),Object.entries(t.queued).forEach((([n,t])=>{t.id=n,e.queued.push(t)})),e}catch(n){const e=m(n);console.log(`Exception while attempting to get assignments: ${e}`)}return e}))}};var S=function(e,n,t,o){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function s(e){try{a(o.next(e))}catch(n){l(n)}}function r(e){try{a(o["throw"](e))}catch(n){l(n)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((o=o.apply(e,n||[])).next())}))};const j=[{name:"type",align:"left",label:"Type",field:"type"},{name:"id",align:"left",label:"UUID",field:"id"}],V=(0,o.aZ)({name:"AssignmentsList",data(){return{queuedColumns:j,pagination:{page:1,rowsPerPage:0},fulfilledList:[],queuedList:[],timer:0}},methods:{refreshAssignmentsList(){return S(this,void 0,void 0,(function*(){const e=yield O.getAllAssignments();this.fulfilledList=e.fulfilled,this.queuedList=e.queued}))},cancelAutoUpdate(){clearInterval(this.timer)}},mounted(){this.refreshAssignmentsList(),this.timer=window.setInterval(this.refreshAssignmentsList,2e3)},beforeUnmount(){this.cancelAutoUpdate()}}),J=(0,x.Z)(V,[["render",I]]),G=J;$()(V,"components",{QTable:E.Z});const B=(0,o.aZ)({name:"Index",components:{NodesList:z,AssignmentsList:G},methods:{}}),H=(0,x.Z)(B,[["render",i]]),Y=H}}]);