"use strict";(globalThis["webpackChunkvircadia_domain_dashboard"]=globalThis["webpackChunkvircadia_domain_dashboard"]||[]).push([[294],{5593:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(7483),o=n(8563),a=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,s)}l((r=r.apply(t,e||[])).next())}))};const i=n(52),s=[],l={getValues(){return a(this,void 0,void 0,(function*(){let t={};try{const e="settings.json",n=yield(0,r.YW)(e);return t=n.values,t}catch(e){const t=(0,r.GD)(e);console.log(t)}return t}))},getDescriptions(){return a(this,void 0,void 0,(function*(){let t=[];try{const e="settings.json",n=yield(0,r.YW)(e);return t=n.descriptions,t}catch(e){const t=(0,r.GD)(e);console.log(t)}return t}))},commitSettings(t){return i.post("/settings.json",JSON.stringify(t)).then((()=>(o.Z.info(o.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((t=>(o.Z.error(o.Z.types.DOMAIN,`Failed to commit settings to Domain: ${t}`),!1)))},automaticCommitSettings(t){s.forEach(((t,e)=>{clearTimeout(t),s.splice(e,1)})),s.push(window.setTimeout(this.commitSettings,5e3,t))},createNewDomainID(t){return a(this,void 0,void 0,(function*(){try{const e=`label=${t}`,n=yield i.post("/api/domains",e);if("failure"===n.data.status)return"";const r=n.data.domain.domainId;return r}catch(e){return console.log(e),""}}))},getDomains(){return a(this,void 0,void 0,(function*(){let t=[];try{const e="api/domains",n=yield(0,r.YW)(e);return t=n.data.domains,t}catch(e){console.log(e)}return t}))}}},7483:(t,e,n)=>{n.d(e,{ge:()=>u,YW:()=>c,GD:()=>s});var r=n(52),o=n.n(r);const a="http://localhost:40100/";var i=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,s)}l((r=r.apply(t,e||[])).next())}))};function s(t){if("string"===typeof t)return t;const e=t;return"message"in e?e.message:`Error: ${JSON.stringify(t)}`}function l(t,e){return(null!==e&&void 0!==e?e:a)+t}function c(t,e){var n;return i(this,void 0,void 0,(function*(){const r=l(t,e);let a="";try{const e=yield o().get(r);if(e&&e.status){if(200===e.status)return e.data;a=`${null!==(n=e.statusText)&&void 0!==n?n:"unspecified"}`}else a=`Poorly formed response to GET ${t}: ${JSON.stringify(e)}`}catch(i){const e=s(i);a=`Exception on GET ${t}: ${e}`,console.log(a)}throw new Error(a)}))}function u(t,e){var n;return i(this,void 0,void 0,(function*(){const r=l(t,e);let a="";try{const e=yield o()["delete"](r);if(e&&e.status){if(200===e.status)return;a=`${null!==(n=e.statusText)&&void 0!==n?n:"unspecified"}`}else a=`Poorly formed response to DELETE ${t}: ${JSON.stringify(e)}`}catch(i){const e=s(i);a=`Exception on DELETE ${t}: ${e}`,console.log(a)}throw new Error(a)}))}},7526:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(3673);const o=(0,r._)("p",{class:"q-mt-md text-h5"},"Server Restarting...",-1);function a(t,e,n,a,i,s){const l=(0,r.up)("q-spinner"),c=(0,r.up)("q-linear-progress"),u=(0,r.up)("q-card-actions"),d=(0,r.up)("q-card"),m=(0,r.up)("q-dialog");return(0,r.wg)(),(0,r.j4)(m,{modelValue:t.restartPopup,"onUpdate:modelValue":e[0]||(e[0]=e=>t.restartPopup=e),persistent:"","transition-duration":"200","transition-hide":"fade"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{flat:"",class:"transparent q-pa-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{align:"center",vertical:"",class:"row items-center no-wrap"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{color:"accent",size:"4rem",thickness:"8"}),o,(0,r.Wm)(c,{value:t.restartProgress,"animation-speed":"500",color:"accent"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var i=n(7483),s=n(8563),l=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,s)}l((r=r.apply(t,e||[])).next())}))};const c=n(52),u=(0,r.aZ)({name:"SharedMethods",props:{restartServerWatcher:Boolean},data(){return{restartPopup:!1,restartProgress:0}},watch:{restartServerWatcher(){this.restartServer()}},methods:{restartServer(){return l(this,void 0,void 0,(function*(){const t=new Promise((function(t){const e="restart";(0,i.YW)(e),setTimeout((function(){t("Domain Server Restarted")}),3e3)})),e=setInterval((()=>{this.restartProgress+=.05}),3e3/23.5);this.restartPopup=!0,yield t,clearInterval(e),this.restartProgress=0,this.restartPopup=!1}))},commitSettings(t){return c.post("/settings.json",JSON.stringify(t)).then((()=>(s.Z.info(s.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((t=>(s.Z.error(s.Z.types.DOMAIN,`Failed to commit settings to Domain: ${t}`),!1)))}}});var d=n(4260),m=n(6778),f=n(151),p=n(9367),g=n(9754),h=n(1598),v=n(7518),w=n.n(v);const b=(0,d.Z)(u,[["render",a]]),y=b;w()(u,"components",{QDialog:m.Z,QCard:f.Z,QCardActions:p.Z,QSpinner:g.Z,QLinearProgress:h.Z})},4294:(t,e,n)=>{n.r(e),n.d(e,{default:()=>G});var r=n(3673);const o=(0,r._)("span",{class:"text-h5 q-ml-sm text-bold text-white"},"Confirm Restart?",-1),a=(0,r._)("span",{class:"text-body2 q-mt-sm"},"Your domain server will be briefly offline while it restarts",-1),i=(0,r._)("img",{src:"icons/favicon-128x128.png"},null,-1),s=(0,r._)("span",{class:"text-h6 q-ml-sm gt-xs"},"Domain Server Administration",-1),l={key:0},c={key:1},u=(0,r._)("span",{class:"gt-xs"},"Restart Server",-1);function d(t,e,n,d,m,f){const p=(0,r.up)("SharedMethods"),g=(0,r.up)("q-avatar"),h=(0,r.up)("q-card-section"),v=(0,r.up)("q-btn"),w=(0,r.up)("q-card-actions"),b=(0,r.up)("q-card"),y=(0,r.up)("q-dialog"),Z=(0,r.up)("q-toolbar-title"),D=(0,r.up)("q-toolbar"),W=(0,r.up)("q-header"),S=(0,r.up)("DrawerMenu"),_=(0,r.up)("q-drawer"),q=(0,r.up)("router-view"),x=(0,r.up)("q-page-container"),k=(0,r.up)("q-layout"),C=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(p,{"restart-server-watcher":m.restartServer},null,8,["restart-server-watcher"]),(0,r.Wm)(k,{view:"hHh lpR fFf"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:m.confirmRestart,"onUpdate:modelValue":e[1]||(e[1]=t=>m.confirmRestart=t),persistent:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"bg-primary q-pa-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"mdi-alert","text-color":"warning",size:"28px","font-size":"28px"}),o,a])),_:1}),(0,r.Wm)(w,{align:"center"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(v,{flat:"",label:"Cancel"},null,512),[[C]]),(0,r.wy)((0,r.Wm)(v,{flat:"",label:"Restart",onClick:e[0]||(e[0]=t=>f.toggleRestartServer())},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(W,{elevated:"",class:"primary-10 text-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,{dense:"",flat:"",round:"",icon:"menu",onClick:f.toggleLeftDrawer},null,8,["onClick"]),(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{size:"1.1em",class:"q-mb-xs"},{default:(0,r.w5)((()=>[i])),_:1}),s])),_:1}),m.isConnected?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(v,{to:"/networking",class:"text-positive",style:{"background-color":"#1B7EB9"},"aria-label":"Connected",flat:""},{default:(0,r.w5)((()=>[(0,r.Uk)("CONNECTED")])),_:1})])):((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(v,{to:"/networking",class:"text-warning",style:{"background-color":"#2D7EB9"},"aria-label":"Not Connected",flat:""},{default:(0,r.w5)((()=>[(0,r.Uk)("NOT CONNECTED")])),_:1})])),(0,r.Wm)(v,{flat:"",dense:"",icon:"mdi-restart","aria-label":"Restart Server",onClick:e[2]||(e[2]=t=>m.confirmRestart=!0),class:"q-mr-sm q-ml-sm"},{default:(0,r.w5)((()=>[u])),_:1})])),_:1})])),_:1}),(0,r.Wm)(_,{"show-if-above":"",modelValue:m.leftDrawerOpen,"onUpdate:modelValue":e[3]||(e[3]=t=>m.leftDrawerOpen=t),side:"left",bordered:"",width:220},{default:(0,r.w5)((()=>[(0,r.Wm)(S)])),_:1},8,["modelValue"]),(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(q)])),_:1})])),_:1})],64)}var m=n(2323),f=n(8880);const p={class:"relative-position"};function g(t,e,n,o,a,i){const s=(0,r.up)("q-icon"),l=(0,r.up)("q-item-section"),c=(0,r.up)("q-badge"),u=(0,r.up)("q-item"),d=(0,r.up)("q-list");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.menuItems,(t=>((0,r.wg)(),(0,r.j4)(u,{key:t.route,to:t.route,exact:"","active-class":"bg-grey-8 text-accent active-tab"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:t.icon},null,8,["name"])])),_:2},1024),(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r._)("span",p,[(0,r.Uk)((0,m.zw)(t.label)+" ",1),(0,r.wy)((0,r.Wm)(c,{color:"primary",label:t.badge,floating:"",rounded:""},null,8,["label"]),[[f.F8,t.badge.length>0]])])])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})])}const h={data(){return{menuItems:[{icon:"mdi-view-dashboard",route:"/",label:"Dashboard",badge:""},{icon:"mdi-lan",route:"/networking",label:"Networking",badge:"!"},{icon:"mdi-shield-lock-outline",route:"/security",label:"Security",badge:""},{icon:"mdi-cube-outline",route:"/content",label:"Content",badge:""},{icon:"mdi-volume-high",route:"/audio",label:"Audio",badge:""},{icon:"mdi-account-multiple",route:"/avatars",label:"Avatars",badge:""},{icon:"mdi-account-outline",route:"/entities",label:"Entities",badge:""},{icon:"mdi-script-text-outline",route:"/scripts",label:"Server Scripts",badge:""},{icon:"mdi-cog-outline",route:"/advanced",label:"Advanced",badge:""},{icon:"mdi-backup-restore",route:"/backup-restore",label:"Backup & Restore",badge:""},{icon:"mdi-console",route:"/assignment",label:"Assignment",badge:""},{icon:"mdi-help-circle",route:"/help",label:"Help & Troubleshooting",badge:""}]}}};var v=n(4260),w=n(7011),b=n(3414),y=n(2035),Z=n(4554),D=n(9721),W=n(7518),S=n.n(W);const _=(0,v.Z)(h,[["render",g]]),q=_;S()(h,"components",{QList:w.Z,QItem:b.Z,QItemSection:y.Z,QIcon:Z.Z,QBadge:D.Z});var x=n(7526),k=n(1959),C=n(5593),Q=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,s)}l((r=r.apply(t,e||[])).next())}))};class E{constructor(){this.isLoggedIn=(0,k.iH)(!1),I().then((t=>{this.isLoggedIn=(0,k.iH)(t),console.log(this.isLoggedIn)}))}static getInstance(){return E.instance||(E.instance=new E),E.instance}}function I(){var t;return Q(this,void 0,void 0,(function*(){const e=yield C.Z.getValues();return Boolean(null===(t=e.metaverse)||void 0===t?void 0:t.access_token)}))}const P=E.getInstance(),T={components:{DrawerMenu:q,SharedMethods:x.Z},data(){return{isConnected:P.isLoggedIn,restartServer:!1,confirmRestart:!1,leftDrawerOpen:!1}},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},toggleRestartServer(){this.restartServer=!this.restartServer}}};var N=n(3066),O=n(6778),R=n(151),$=n(5589),A=n(5096),L=n(9367),V=n(8240),M=n(3812),B=n(9570),Y=n(3747),H=n(2901),j=n(2652),U=n(677);const z=(0,v.Z)(T,[["render",d]]),G=z;S()(T,"components",{QLayout:N.Z,QDialog:O.Z,QCard:R.Z,QCardSection:$.Z,QAvatar:A.Z,QCardActions:L.Z,QBtn:V.Z,QHeader:M.Z,QToolbar:B.Z,QToolbarTitle:Y.Z,QDrawer:H.Z,QPageContainer:j.Z}),S()(T,"directives",{ClosePopup:U.Z})}}]);